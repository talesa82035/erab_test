
@COMNAME417
#FUNCTIONS
TSTR:コマンド名受渡 = 帰宅する

;===================================================
;コマンドタイプ
;===================================================
@COMTYPE_417
#FUNCTION
TFLAG:コマンドタイプ受渡 = COMTYPE("単独可能")

@COM_TOOLTIP_417
LOCALS = <br>■帰宅する<br>
LOCALS += "外出先から帰宅し、次の日に進むコマンド。"
LOCALS += "<br>COMタイプ：単独可能<br>取得ソース：なし"
LOCALS += "<br>固有の取得経験：なし<br>"
TSTR:ツールチップ受渡 = %LOCALS%


;-------------------------------------------------
;帰宅する
;-------------------------------------------------
@COM417
CFLAG:MASTER:睡眠 = 1
CFLAG:MASTER:就寝時刻 = DAY * 1440 + TIME
SIF CFLAG:MASTER:起床予定時刻 == CFLAG:MASTER:就寝時刻 % (DAY * 1440)
	CFLAG:MASTER:就寝時刻 = DAY * 1440 + TIME + 1
FLAG:一日終了 = 1
PRINTFORML {FLAG:1}
RETURN 1
;-------------------------------------------------
;実行判定
;-------------------------------------------------

@COM_ABLE417
#DIM 最大人数

;移動実行判定
SIF SAVESTR:ゲームフェイズ管理 != "通常モード"
	RETURN 0
;一括管理
SIF GLOBAL_COMABLE(417)
	RETURN RESULT
;外出時のみ
SIF FLAG:お出かけ先フラグ < 1
	RETURN 0
SIF CFLAG:うふふ == 2
	RETURN 0
RETURN 1
;-------------------------------------------------
;実行時メッセージ
;-------------------------------------------------
@MESSAGE_COM417

PRINTFORML %CALLNAME:PLAYER%はリゾートの自宅へと帰還した。
