;==================================================================================================
@ゆきずりセックス判定(ARG)
;-------------------------------------------------
;ARG番のキャラがゆきずりセックスを実行するかを返す関数
;実行する場合フラグ立てまで行う
;開始時, 実行中には1を返す
;終了時, 開始しない時, 途中終了時には0を返す
;--------------------------------------------------------------------------------------------------

;--------------------------------------------------------------------------------------------------

;既に実行中の場合は継続判定に移行する。直前の行動が「覗く」ならとりあえず継続処理
IF IS_ゆきずりセックス中(ARG) || TCVAR:ARG:ゆきずりセックス_覗きフラグ
	CALL ゆきずりセックス継続判定(ARG)
	RETURN RESULT
ENDIF

;▼処理を行うかの判定▼
;直前の行動が時間が経過しないコマンドの場合は処理をスキップ
SIF !TIME_PROGRESS(TFLAG:行動前時刻)
	RETURN 0

;睡眠中は素直に寝てなさい
SIF CFLAG:ARG:睡眠
	RETURN 0
;ダウン中も素直に寝てなさい
SIF BASE:ARG:体力 < 1
	RETURN 0

;あなた宅に上がり込まない
SIF CFLAG:ARG:現在マップ種別 == 0 && CFLAG:ARG:現在位置 >= 2000
	RETURN 0
;脱衣所、風呂場などの異性禁止エリアに侵入しない
SIF CFLAG:ARG:現在マップ種別 == 0 && (CFLAG:ARG:現在位置 >= 7 && CFLAG:ARG:現在位置 <= 14)
	RETURN 0
SIF CFLAG:ARG:現在マップ種別 == 0 && (CFLAG:ARG:現在位置 >= 700 && CFLAG:ARG:現在位置 <= 900)
	RETURN 0

;性知識が無い場合は誘わない
SIF 知識素質:ARG:性知識 < 0
	RETURN 0
	
;性感帯無い場合も駄目
SIF !HAS_EROGENOUS_ZONE(ARG)
	RETURN 0
	
;同行中はやんないよ
SIF CFLAG:ARG:同行
	RETURN 0
SIF CFLAG:ARG:一緒に遊ぶ
	RETURN 0
SIF CFLAG:ARG:デート
	RETURN 0
SIF CFLAG:ARG:うふふ
	RETURN 0
SIF MODE_存在判定_いずれか側("同行系", ARG)
	RETURN 0
SIF MODE_存在判定_いずれか側("キス系", ARG)
	RETURN 0
SIF MODE_存在判定_ターゲット側("全裸散歩", ARG)
	RETURN 0
SIF MODE_存在判定_いずれか側("ハーヴィンオナホ系", ARG)
	RETURN 0

;既に誰かが同じ場所で隠密してるなら発生しない
FOR LOCAL, 0, CHARANUM
	SIF LOCAL == ARG
		CONTINUE
	SIF IS_SAME_ROOM(ARG, LOCAL) && CFLAG:LOCAL:隠密
		RETURN 0
NEXT

;興味の場合は4h、愛好の場合は2h、中毒の場合は1h毎にそれぞれ判定を発生させる
SELECTCASE 性癖素質:ARG:ゆきずりセックス
	CASE 1
		SIF TCVAR:ARG:ゆきずりセックス_終了時刻 + 4 * 60 > NOW()
			RETURN 0
	CASE 2
		SIF TCVAR:ARG:ゆきずりセックス_終了時刻 + 2 * 60 > NOW()
			RETURN 0
	CASE 3
		SIF TCVAR:ARG:ゆきずりセックス_終了時刻 + 1 * 60 > NOW()
			RETURN 0
ENDSELECT

;現在の性欲値が性癖レベルによる割合以下(1:50%,2:40%,3:30%)なら発生しない
SIF BASE:ARG:性欲 < (MAXBASE:ARG:性欲 * ( 10 - ( 6 - 性癖素質:ARG:ゆきずりセックス )) / 10 )
	RETURN 0
	
;実行閾値の設定
SIF !ゆきずりセックス実行判定(ARG)
	RETURN 0



;ゆきずりセックス回数のカウントアップ
IF CFLAG:ARG:リゾート内ゆきずりセックス回数 < 1
	CALL 履歴データベース登録(CFLAG:ARG:人物番号, @"<font color='#%カラーパレット_HTML("薄ピンク")%'>初めてリゾート内で[ゆきずりセックス]をした</font>","うふふ")
ELSEIF CFLAG:ARG:リゾート内ゆきずりセックス回数 == 9
	CALL 履歴データベース登録(CFLAG:ARG:人物番号, @"<font color='#%カラーパレット_HTML("薄ピンク")%'>リゾート内で[ゆきずりセックス]をした回数が１０回に到達した</font>","うふふ")
ELSEIF CFLAG:ARG:リゾート内ゆきずりセックス回数 == 49
	CALL 履歴データベース登録(CFLAG:ARG:人物番号, @"<font color='#%カラーパレット_HTML("薄ピンク")%'>リゾート内で[ゆきずりセックス]をした回数が５０回に到達した</font>","うふふ")
ELSEIF CFLAG:ARG:リゾート内ゆきずりセックス回数 == 99
	CALL 履歴データベース登録(CFLAG:ARG:人物番号, @"<font color='#%カラーパレット_HTML("薄ピンク")%'>リゾート内で[ゆきずりセックス]をした回数が１００回に到達した</font>","うふふ")
ENDIF
CFLAG:ARG:リゾート内ゆきずりセックス回数 ++

;プレイ内容の決定
CALL ゆきずりセックス内容決定(ARG)

;残り時間と絶頂値を初期化
TCVAR:ARG:ゆきずりセックス_残時間 = 90
TCVAR:ARG:ゆきずりセックス_絶頂値 = 100

;隠密状態にする
CFLAG:ARG:隠密 = 1

RETURN 1

;==================================================================================================
@ゆきずりセックス実行判定(ARG)
#FUNCTION
;-------------------------------------------------
;ARG番のキャラがゆきずりセックスを実行するかを返す関数
;実行する場合には1を返し、それ以外は0を返す
;--------------------------------------------------------------------------------------------------
#DIM 誘い係数
#DIM 誘われ係数
#DIM 何もしない係数
;--------------------------------------------------------------------------------------------------


;**********************************************************************************
; 誘われ係数の設定
;  --- 性的魅力に関わる素質や誘う側が優位に立てそうな素質に影響。
;      対象キャラの性欲値は影響しない。
;      「エロい人」や「気の弱そうな人」、「優しそうな人」は誘われやすくなり、
;      「見た目が子供」「怖そうな人」「厳しそうな人」「断られそうな人」は若干誘われにくくなる。

;係数の初期化
誘われ係数 = 0

;○「エロい人」判定の素質群
;素質[淫乱]所持している
SIF TALENT:ARG:淫乱
	誘われ係数 += 1

;素質[恥薄い]所持している
SIF TALENT:ARG:羞恥心 < 0
	誘われ係数 += 1

;巨乳以上である
SIF TALENT:ARG:バストサイズ > 0
	誘われ係数 += 1

;発情期中である なんかそういうフェロモンでてそう
SIF CFLAG:ARG:発情期フラグ
	誘われ係数 += 1

;○「気の弱そうな人」判定の素質群
;素質[臆病]所持している
SIF TALENT:ARG:度胸 < 0
	誘われ係数 += 1

;素質[押しに弱い]所持している
SIF TALENT:ARG:マイペース < 0
	誘われ係数 += 1

;素質[プライド低い]所持している
SIF TALENT:ARG:プライド < 0
	誘われ係数 += 1

;○「優しそうな人」判定の素質群
;素質[素直]所持している
SIF TALENT:ARG:態度 < 0
	誘われ係数 += 1

;素質[大人しい]所持している
SIF TALENT:ARG:応答 < 0
	誘われ係数 += 1

;素質[淑女的]所持している
SIF TALENT:ARG:精神的余裕 == 2
	誘われ係数 += 1

;素質[面倒見が良い]所持している
SIF TALENT:ARG:無関心 < 0
	誘われ係数 += 1


;●マイナス判定の素質群
;素質[気丈]所持している
SIF TALENT:ARG:度胸 > 0
	誘われ係数 -= 1

;素質[反抗的]所持している
SIF TALENT:ARG:態度 > 0
	誘われ係数 -= 1

;素質[プライド高い]所持している
SIF TALENT:ARG:応答 > 0
	誘われ係数 -= 1

;素質[生意気]所持している
SIF TALENT:ARG:プライド > 0
	誘われ係数 -= 1

;素質[ツンデレ]所持している
SIF TALENT:ARG:ツンデレ
	誘われ係数 -= 1

;素質[真面目][自制心]所持している
SIF TALENT:ARG:自制心 > 0
	誘われ係数 -= 1

;素質[無関心]所持している
SIF TALENT:ARG:無関心 > 0
	誘われ係数 -= 1

;素質[抵抗]所持している
SIF TALENT:ARG:抵抗
	誘われ係数 -= 1
	
;見た目が子供っぽい
SIF TALENT:ARG:外見年齢 == 10 && TALENT:ARG:外見年齢 == 11
	誘われ係数 -= 1


;最低でも3は持つようにする
誘われ係数 = MAX(3,誘われ係数)

;**********************************************************************************
; 誘い係数の設定
;  --- 現在の性欲値や欲情状態に強く影響

;係数を現在の性欲割合で初期化
誘い係数 = (BASE:ARG:性欲 * 100) / MAXBASE:ARG:性欲

;素質[淫乱]所持している
SIF TALENT:ARG:淫乱
	誘い係数 += 1

;最低でも3は持つようにする
誘い係数 = MAX(3,誘い係数)


;**********************************************************************************
; 何もしない係数の設定
;  --- 基本値は誘い+誘われ。

何もしない係数 = 誘い係数 + 誘われ係数


;乱数で実行判定を行う
SELECTCASE RAND:(誘い係数 + 誘われ係数 + 何もしない係数)
	CASE 0 TO 誘い係数
		;誘い
		TCVAR:ARG:ゆきずりセックス_誘い = 0
		
	CASE 誘い係数 TO 誘い係数 + 誘われ係数
		;誘われ
		TCVAR:ARG:ゆきずりセックス_誘い = 1
		
	CASEELSE
		;何もしないはそのまま0を返す
		RETURNF 0
		
ENDSELECT

;ランダムな竿役の決定 0918時点でとりあえず7種。CASEELSEだけちょっと確率高め
TCVAR:ARG:ゆきずりセックス_相手モブ = RAND:8
TCVAR:ARG:ゆきずりセックス_相手描写 = 0

;同室なら物陰に行く描写を行う
IF CFLAG:ARG:同室
	SETCOLOR カラーパレット("えっちな色")
	IF TCVAR:ARG:ゆきずりセックス_誘い
		;NPCに誘われる
		PRINTFORML %CALLNAME:ARG%は観光客から性行為を求められ物陰へ移動した……
		;お金を対価に性行為を持ち掛けられた%CALLNAME:ARG%は、交渉のすえ/待っていたとばかりに嬉々として/妖艶な笑みをうかべて承諾すると客に手を引かれ物陰に連れ込まれていった……
	ELSE
		;NPCを誘う
		PRINTFORML %CALLNAME:ARG%は近くにいた観光客を誘って物陰へ移動した……
	ENDIF
	RESETCOLOR
ENDIF

RETURNF 1



;==================================================================================================
@ゆきずりセックス継続判定(ARG)
;-------------------------------------------------
;ARG番のキャラがゆきずりセックスを継続するか返す関数
;継続する場合には1を返し、終了する場合には0を返す
;--------------------------------------------------------------------------------------------------

;--------------------------------------------------------------------------------------------------

;対象の隠密状態を継続
CFLAG:ARG:隠密 = 1

;時間が経過しないコマンドの場合は処理をスキップ
IF TIME_PROGRESS(TFLAG:行動前時刻)
	
	;残時間の減少処理
	TCVAR:ARG:ゆきずりセックス_残時間 = MAX(0, TCVAR:ARG:ゆきずりセックス_残時間 - TIME_PROGRESS(TFLAG:行動前時刻))

	;直前の行動で絶頂値とパラメータの変動処理を行っているならそれらの処理をスキップ
	IF !TCVAR:ARG:ゆきずりセックス_覗きフラグ
		CALL ゆきずりセックス_絶頂値更新(ARG, TIME_PROGRESS(TFLAG:行動前時刻))
		CALL ゆきずりセックス_パラメータ変動処理(ARG, TIME_PROGRESS(TFLAG:行動前時刻))
	ENDIF

ENDIF

;覗きフラグを切っておく
TCVAR:ARG:ゆきずりセックス_覗きフラグ = 0

;行為中にあなたが物陰に入ってきた処理
CALL ゆきずりセックス_遭遇処理(ARG)


;継続確認
IF IS_ゆきずりセックス中(ARG)
	RETURN 1
ELSE
	
	;同じ部屋にいるなら移動先PRINT
	IF CFLAG:ARG:同室
		SETCOLOR カラーパレット("えっちな色")
		PRINTFORML 顔を赤らめた%CALLNAME:ARG%が見知らぬ男と物陰から出てきた……
		RESETCOLOR
	ENDIF
	
	;各関連変数を初期化
	TCVAR:ARG:ゆきずりセックス_体位 = 0
	TCVAR:ARG:ゆきずりセックス_残時間 = 0
	TCVAR:ARG:ゆきずりセックス_絶頂値 = 0
	
	;終了時間を記録
	TCVAR:ARG:ゆきずりセックス_終了時刻 = NOW()

	;覗きバレフラグを閉じておく
	TCVAR:ARG:覗きバレ = 0
	
	;隠密を解除
	CFLAG:ARG:隠密 = 0

	RETURN 0
ENDIF


;==================================================================================================
@ゆきずりセックス_絶頂値更新(ARG, 経過時間)
;-------------------------------------------------
;お相手側の絶頂値の変動を行う。
;変動量は対象の欲望と技巧によって増加し、10分を基準として経過時間によって補正がかかる。
;(5分なら50%、20分なら200%)
;--------------------------------------------------------------------------------------------------
#DIM 経過時間
#DIM 変動値
;--------------------------------------------------------------------------------------------------
IF TCVAR:ARG:ゆきずりセックス_絶頂値 > 0
	変動値 = 20
	変動値 += ABL:ARG:欲望
	変動値 += ABL:ARG:技巧
	
	;10分をベースに、経過時間変動値を補正
	変動値 *= 経過時間
	変動値 /= 10
	
	TCVAR:ARG:ゆきずりセックス_絶頂値 = MAX(0, TCVAR:ARG:ゆきずりセックス_絶頂値 - 変動値)
	
ELSE
	TCVAR:ARG:ゆきずりセックス_絶頂値 = 100
ENDIF


;==================================================================================================
@ゆきずりセックス_パラメータ変動処理(ARG, 経過時間=1)
;-------------------------------------------------
;各種パラメータの増加、性欲の減少などの変動を行う
;変動量は
;--------------------------------------------------------------------------------------------------
#DIM 絶頂閾値
#DIM 経過時間
#DIM ループ変数
#DIM 絶頂数
#DIM 性欲減少量
;--------------------------------------------------------------------------------------------------

;絶頂数を初期化
絶頂数 = 0
絶頂閾値 = 20

;絶頂閾値に対応感度を補正
SELECTCASE TCVAR:ARG:ゆきずりセックス_体位
	CASE 1 ;V
		絶頂閾値 -= TALENT:ARG:Ｖ感度
	CASE 2 ;A
		絶頂閾値 -= TALENT:ARG:Ａ感度
ENDSELECT

;対象キャラの絶頂判定
; …経過時間を閾値で割った数だけ処理を繰り返す。感度がデフォなら10分で1回、20分で2回。
FOR ループ変数, 0, 経過時間/絶頂閾値
	CALL ゆきずりセックス_絶頂加算(ARG)
	絶頂数 ++
NEXT
;上の端数は確率で絶頂判定。感度がデフォなら15分で1回の絶頂と50%の確率でさらに絶頂
IF 経過時間%絶頂閾値 > RAND:絶頂閾値
	CALL ゆきずりセックス_絶頂加算(ARG)
	絶頂数 ++
ENDIF

;絶頂数が1以上あるならZP取得処理
IF 絶頂数
	CALL ZP_取得処理(ARG, 絶頂数, 0)
	
	;絶頂出来たら性欲を20%程発散する
	;性欲減少量 = MAXBASE:ARG:性欲 / 5
	
	;絶頂で性欲を固定値で発散する 最大性欲が高いほど満足に程遠くなるって寸法よ
	性欲減少量 = 100
	
	BASE:ARG:性欲 = MAX(BASE:ARG:性欲 - 性欲減少量, 0)
ENDIF


;==================================================================================================
@ゆきずりセックス_絶頂加算(ARG)
;-------------------------------------------------
;絶頂判定を経て絶頂した時の処理
;--------------------------------------------------------------------------------------------------
;部位によって絶頂箇所を加算
SELECTCASE TCVAR:ARG:ゆきずりセックス_体位
	CASE 1 ;V
		EXP:ARG:Ｖ絶頂経験 += 1
		CALL TAKE_SPERM(ARG, -2, 25)
	CASE 2 ;A
		EXP:ARG:Ａ絶頂経験 += 1
		CALL TAKE_SPERM_A(ARG, -2, 25)
ENDSELECT
EXP:ARG:絶頂経験 += 1


;==================================================================================================
@ゆきずりセックス_遭遇処理(ARG)
;-------------------------------------------------
;「物陰に隠れる」で行為中のキャラに遭遇してしまったときの処理
;--------------------------------------------------------------------------------------------------
#DIM 経過時間
;--------------------------------------------------------------------------------------------------

IF CFLAG:PLAYER:隠密 && IS_SAME_ROOM(ARG)

	DRAWLINE
	
	;ここで行為中のキャラとばったり遭遇
	
	;いずれ「そのまま見られながら行為を続行」とかそういうのを付けたい
	
	PRINTFORML だれか先客がいるようだ……。
	PRINTFORMW %CALLNAME:PLAYER%は先客の邪魔にならないよう静かにその場を離れた。
	
	DRAWLINE
	
	
	;あなたと同行者の隠密を解除する
	CFLAG:PLAYER:隠密 = 0
	FOR LOCAL, 1, CHARANUM
		SIF TARGET:LOCAL < 1
			BREAK
		SIF CFLAG:(TARGET:LOCAL):同行 || CFLAG:(TARGET:LOCAL):うふふ
			CFLAG:(TARGET:LOCAL):隠密 = 0
	NEXT
	
ENDIF


;==================================================================================================
@ゆきずりセックス_覗く(ARG)
;-------------------------------------------------
;「COMF404_覗く」からゆきずりセックスを覗き見る処理
;--------------------------------------------------------------------------------------------------
#DIM 経過時間
;--------------------------------------------------------------------------------------------------

;覗きフラグを立てる
TCVAR:ARG:ゆきずりセックス_覗きフラグ = 1

;経過時間を加算
TIME += 12

;絶頂値の変動 15分は決め打ち(覗き見3分+このイベント経過時間の12分)
CALL ゆきずりセックス_絶頂値更新(ARG, 15)

;共通文章
PRINTFORM 物陰を覗き見ると、
SELECTCASE TCVAR:ARG:ゆきずりセックス_体位
	CASE 1 ;Ｖ性交
		PRINTFORML 見知らぬ男に膣穴を貫かれ喘がされている%CALLNAME:ARG%の姿を目撃した。
	CASE 2 ;Ａ性交
		PRINTFORML 見知らぬ男の男根を尻穴で咥え込んでいる%CALLNAME:ARG%の姿を目撃した。
	CASEELSE ;その他
		PRINTFORML %CALLNAME:ARG%が愛おしそうに見知らぬ男のペニスに奉仕している姿を目撃した。
ENDSELECT
PRINTW

IF TALENT:ARG:性別 == 1 && TCVAR:ARG:ゆきずりセックス_相手描写 == 0
;女性を前提とした追加文
	SIF CFLAG:ARG:リゾート内ゆきずりセックス回数 > 10
		PRINTFORM 今回
	PRINTFORM %CALLNAME:ARG%
	IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
		PRINTFORM %TEXTR("が誘った/が連れ込んだ/が体を許した/が股を開いた/を犯している")%のは
	ELSE
		PRINTFORM %TEXTR("が誘った/が連れ込んだ")%のは
	ENDIF

	SELECTCASE TCVAR:ARG:ゆきずりセックス_相手モブ
	CASE 0
	;冴えない童貞
		PRINTFORMW 、遠目に見てもぱっとしない%TEXTR("冴えない/陰気そうな")%青年だ。
		PRINTL
		IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
			PRINTFORML つい先程まで童貞だったのだろう。
			PRINTFORML 明らかに不慣れな動きの男は、本来釣り合うはずもない程に見目麗しい%CALLNAME:ARG%の体を前に%TEXTR("がっつく/貪る")%ように荒々しく腰を振り、
			PRINTFORMW %CALLNAME:ARG%のことなど微塵も考えずに、%TEXTR("人生で初めて味わう性交快楽/降って湧いた極上の雌穴")%に没頭している。
			PRINTL
			PRINTFORML 乱暴に腰を掴まれ、ときに%TEXTR("痕が残るほど/握り潰されるように")%強く胸をまさぐられながら、
			PRINTFORMW 痛みすら感じているだろう%CALLNAME:ARG%はしかし、初物食いの背徳と興奮に%TEXTR("満ちた/陶酔した")%表情で男の肉棒を受け止める。
		ELSE
			PRINTFORML まともな女性経験など今の今までなかったのだろう。
			PRINTFORMW 望むべくもない程の美女による%TEXTR("陰茎/未使用ペニス")%への甲斐甲斐しい性奉仕を受けて、男は天を仰ぐようにしてそのあまりの快楽に溺れている。
			IF CSTR:ARG:ゆきずりセックス_プレイ内容 == "フェラチオ"
				PRINTL
				PRINTFORML もはや快楽を貪ることしか頭になくなってしまった青年に、%CALLNAME:ARG%を気遣うことなどできるはずもない。
				IF TALENT:ARG:角あり
					PRINTFORM 大事な角
				ELSE
					PRINTFORM 美しい髪
				ENDIF
				PRINTFORML を乱暴に掴まれながら、もっと、もっとと自分勝手に突き込まれるペニスを、
				PRINTFORMW %CALLNAME:ARG%はそれでも献身的に、唇で、舌で、喉で受け止め奉仕する。
			ENDIF
		ENDIF
	CASE 1
	;恰幅のいい中年
		PRINTFORMW 、でっぷりと腹の出た恰幅のいい中年だ。
		PRINTL
		PRINTFORML 身なりのいいこの男は、娼館などにも通い慣れているのだろう。
		IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
			PRINTFORMW %CALLNAME:ARG%の奥を小突く腰つきは慣れたもので、%CALLNAME:ARG%は快楽に肌を泡立たせながら押し殺せない嬌声に喉を震わせる。
		ELSE
			PRINTFORMW ペニスに%CALLNAME:ARG%の丹念な奉仕を受けながら、男は感謝を示すように%CALLNAME:ARG%の頭を撫でる。
		ENDIF
	CASE 2
	;おねショタ(またはインピオ)
		IF TALENT:ARG:年齢層 == 10 || (BASE:ARG:年齢 <= 13 && BASE:ARG:年齢 != 0)
			PRINTFORMW 、同じ年頃の少年だ。
		ELSE
			PRINTFORMW 、まだ%TEXTR("小さな/年端もいかない")%男の子だ。
		ENDIF
		PRINTL
		IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
			PRINTFORML まだ精通しているかもわからない年頃の少年を相手に、導くように腰を振る%CALLNAME:ARG%。
			PRINTFORMW %TEXTR("早すぎる実践性教育/幼い体で感じる「オトナの遊び」/初めてする「せっくす」")%の快楽に、少年は%TEXTR("溺れ/翻弄され")%るまま%TEXTR("必死/がむしゃら")%に腰を打ちつけた。
		ELSE
			PRINTFORML まだ「そこ」%TEXTR("が気持ちよくなれる器官だという/が気持ちよくなるための器官なのだという/に触れると気持ちがいい")%ことすら知らなかったのだろう。
			PRINTFORMW %CALLNAME:ARG%の丹念な奉仕に%TEXTR("まだ小さい/こども")%ちんちんをはち切れんほどに大きくさせて、少年は天を仰ぎ初めての快楽に溺れている。
		ENDIF
		PRINTL
		PRINTFORML 幼気な少年の無垢な性を、%CALLNAME:ARG%はただ快楽のために貪る。
		PRINTFORML はじめての性体験をこれほど鮮烈に、そしてこれほどの美女を相手迎えてしまった少年は、
		PRINTFORMW かわいそうに、きっともう%TEXTR("地元の同年代の女の子/普通の女の子")%程度では満足できない程に性癖を歪められてしまったことだろう。
	CASE 3
	;ショタおね風味
		IF TALENT:ARG:年齢層 == 10 || (BASE:ARG:年齢 <= 13 && BASE:ARG:年齢 != 0)
			PRINTFORMW 、同じ年頃の少年だ。
		ELSE
			PRINTFORMW 、まだ%TEXTR("小さな/年端もいかない")%男の子だ。
		ENDIF
		PRINTL
		IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
			PRINTFORML どうやら見かけによらず、この少年は「勉強熱心」なようだ。
			PRINTFORML 地元の同年代%TEXTR("相手に/の幼いカラダで")%沢山「%TEXTR("勉強/練習")%」したのだろうか。既に覚えのある性を無邪気に振りかざして、マセた子供は腰を打ちつける。
			PRINTL
			PRINTFORML きっと女のことを「使うときもちいいオモチャ」くらいにしか思っていないのだろう。%CALLNAME:ARG%がとびきりの美女であろうと、例外ではない。
			PRINTFORML 無邪気のままに。本能のままに。幼いながらに身につけつつある「オンナを支配するすべ」を身につけつつある少年は、
			PRINTFORMW 乱暴に%CALLNAME:ARG%の腰を掴んで「きもちいい穴」で遊びながら、我が物顔で胸を弄び唇にむしゃぶりつく。
			PRINTL
			PRINTFORML 幼さゆえの無邪気な残酷さと、年頃に見合わぬ技巧。
			PRINTFORMW 想像以上の刺激的な相手に歓喜した%CALLNAME:ARG%はされるがままを許し、このひとときだけの小さな「ご主人さま」を甘い締めつけと嬌声でもてなした。
		ELSE
			PRINTFORML どうやら見かけによらず、この少年は「勉強熱心」なようだ。きっと地元では、同年代の子を散々「使って」きたのだろう。
			IF CSTR:ARG:ゆきずりセックス_プレイ内容 == "フェラチオ"
				PRINTFORM 跪いて口淫奉仕する%CALLNAME:ARG%の
				IF TALENT:ARG:角あり
					PRINTFORM 大事な角
				ELSE
					PRINTFORM 美しい髪
				ENDIF
				PRINTFORML をオモチャを手にするがごとく握り、
				PRINTFORMW 手綱のように引っぱってさらなる奉仕を要求するさまは、明らかに「奉仕させ慣れ」ている者のそれだ。
			ELSE
				PRINTFORMW %TEXTR("ニヤつきながら/我が物顔で胸を揉みながら")%手淫奉仕を受けるさまは、明らかに「奉仕させ慣れ」ている者のそれだ。
			ENDIF
			PRINTL
			PRINTFORML 無邪気のままに女を見下し、%CALLNAME:ARG%のような極上の美女であろうと「きもちいいオモチャ」程度にしか思っていないだろう幼き暴君。
			PRINTFORMW 想像以上の刺激的な相手に歓喜した%CALLNAME:ARG%はされるがままを許し、このひとときだけの小さな「ご主人さま」にさらなる奉仕を捧げた。
		ENDIF
	CASE 4
	;ガタイのいい男
		PRINTFORMW 、体格のいい「いかにも」といった感じの男だ。
		PRINTL
		PRINTFORML 引き締まった体。顔も悪くない。さぞや女を喰い慣れているだろう、といった風貌の彼は、実際その通りらしかった。
		IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
			PRINTFORML 歴戦を思わせる手慣れた愛撫はまさに、%CALLNAME:ARG%が求めていた「インスタントな快楽」そのもので、
			PRINTFORMW %CALLNAME:ARG%は奥を突かれながら、幾度も押し寄せる絶頂に背を震わせ嬌声をあげる。
		ELSE
			PRINTFORML 「奉仕されて当然」といった態度で%CALLNAME:ARG%の奉仕を受ける姿はいっそ威風にすら溢れ、
			PRINTFORMW %CALLNAME:ARG%は声をかけた男が見込み以上であったことを喜ぶように、心を込めて彼に尽くしている。
		ENDIF
	CASE 5
	;おじいちゃん  老練な手管
		PRINTFORMW 、顔に皺を重ねた老境と言って差し支えない男性だ。
		PRINTL
		PRINTFORML 腰が曲がり、頭も薄くなった老爺とあっても、%CALLNAME:ARG%ほどの女を相手にできるとなれば、老いたモノでも勃つらしい。
		PRINTFORMW 衰えていたはずの性機能はここにきて急速に賦活され、男は目をぎらつかせながら生き生きと、久方ぶりにして人生最高だろう極上の雌を堪能している。
		IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
			PRINTL
			PRINTFORM ペニスで奥を小突きながら節くれだった手が胸を揉み、枯れ枝のような指が乳首をくすぐる。
			PRINTFORM 全盛を取り戻したかのような男の老練したねちっこい愛撫に、%CALLNAME:ARG%は背筋を震わせ、甘く蕩けた声で甲高く鳴いた。
		ENDIF
	
;	CASE 6
	;ならずものっぽいやつ レイプごっこ
;		IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
;			PRINTFORM 
;		ELSE
;			PRINTFORM 
;		ENDIF


	CASEELSE
		IF TCVAR:ARG:ゆきずりセックス_誘い && RAND:2 == 0
		;彼女持ちのやつ。自分から誘った場合限定
			PRINTFORMW 、特に目立ったところのない、いかにも普通の男だ。
			PRINTL
			PRINTFORML ……いや、顔見知りなどではないが、よくよく思い返せばかすかに見覚えはあった。
			IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
				IF RAND:2 == 0
					PRINTFORML オーナーとしての記憶が確かなら、彼はたしか妻と一緒に宿泊している客だったはず。
					PRINTFORMW ……ああ、なんということだ。%CALLNAME:ARG%は%TEXTR("こともあろうに/卑しくも")%相手のいる男をその体で誘惑し、彼の愛を試しているのだ！
					PRINTL
					PRINTFORML もっとも、彼にとっては酷な話である。
					PRINTFORML 顔もカラダも、愛する妻などとは比べ物にならない極上の雌が、都合よく体を差し出し股を開く。
					PRINTFORMW この状況で狂わない男などいないだろう。
					PRINTL
					PRINTFORML 背徳の中で味わう%CALLNAME:ARG%のカラダ。その脳が焼けるほどの気持ちよさを知ってしまったのだ。
					PRINTFORML 哀れな彼はきっともう、妻とのセックスでは満足することなどできやしないだろう……。
					PRINTL
					PRINTFORML 肉欲に負け、己の愛を「%CALLNAME:ARG%とのたった一度の%TEXTR("浮気交尾/セックス")%以下の価値」へと自ら貶めてしまった男の喘ぎに、
					PRINTFORMW %CALLNAME:ARG%は満足げな笑みをうかべながら悪徳と愉悦に満ちた嬌声をあげている。
				ELSE
					PRINTFORML オーナーとしての記憶が確かなら、彼はたしか彼女連れで宿泊している客だったはず。
					PRINTFORMW ……ああ、なんということだ。%CALLNAME:ARG%は%TEXTR("こともあろうに/卑しくも")%相手のいる男をその体で誘惑し、彼の愛を試しているのだ！
					PRINTL
					PRINTFORML もっとも、彼にとっては酷な話である。
					PRINTFORML 顔もカラダも、恋人などとは比べ物にならない極上の雌が、都合よく体を差し出し股を開く。
					PRINTFORMW この状況で狂わない男などいないだろう。
					PRINTL
					PRINTFORML 肉欲に負け、己の愛を「%CALLNAME:ARG%とのたった一度の%TEXTR("浮気交尾/セックス")%以下の価値」へと自ら貶めてしまった男の喘ぎに、
					PRINTFORMW %CALLNAME:ARG%は満足げな笑みをうかべながら悪徳と愉悦に満ちた嬌声をあげている。
				ENDIF
			ELSE
				IF RAND:2 == 0
					PRINTFORML オーナーとしての記憶が確かなら、彼はたしか妻と一緒に宿泊している客だったはず。
					PRINTFORMW ……ああ、なんということだ。%CALLNAME:ARG%は%TEXTR("こともあろうに/卑しくも")%相手のいる男をその体で誘惑し、彼の愛を試しているのだ！
					PRINTL
					PRINTFORML もっとも、彼にとっては酷な話である。
					PRINTFORML 顔もカラダも、愛する妻などとは比べ物にならない極上の雌が、都合よく自らへの性奉仕を申し出る。
					PRINTFORMW この状況で狂わない男などいないだろう。
					PRINTL
					PRINTFORML 背徳の中で味わう%CALLNAME:ARG%の愛撫。その脳が焼けるほどの気持ちよさを知ってしまったのだ。
					PRINTFORML 哀れな彼はきっともう、妻の奉仕に愛は感じても、満足することなどできやしないだろう……。
					PRINTL
					PRINTFORML 肉欲に負け、己の愛を「%CALLNAME:ARG%のえっちなご奉仕以下の価値」へと自ら貶めてしまった男の喘ぎに、
					PRINTFORMW %CALLNAME:ARG%は満足げな笑みをうかべながらペニスへの奉仕を続けている……。
				ELSE
					PRINTFORML オーナーとしての記憶が確かなら、彼はたしか彼女連れで宿泊している客だったはず。
					PRINTFORMW ……ああ、なんということだ。%CALLNAME:ARG%は%TEXTR("こともあろうに/卑しくも")%相手のいる男をその体で誘惑し、彼の愛を試しているのだ！
					PRINTL
					PRINTFORML もっとも、彼にとっては酷な話である。
					PRINTFORML 顔もカラダも、恋人などとは比べ物にならない極上の雌が、都合よく自らへの性奉仕を申し出る。
					PRINTFORMW この状況で狂わない男などいないだろう。
					PRINTL
					PRINTFORML 背徳の中で味わう%CALLNAME:ARG%の愛撫。その脳が焼けるほどの気持ちよさを知ってしまったのだ。
					PRINTFORML 哀れな彼はきっともう、恋人の奉仕に愛は感じても、満足することなどできやしないだろう……。
					PRINTL
					PRINTFORML 肉欲に負け、己の愛を「%CALLNAME:ARG%のえっちなご奉仕以下の価値」へと自ら貶めてしまった男の喘ぎに、
					PRINTFORMW %CALLNAME:ARG%は満足げな笑みをうかべながらペニスへの奉仕を続けている……。
				ENDIF
			ENDIF
		ELSE
		;それ以外。ごく普通の男性
			PRINTFORMW 、遠目に見てもぱっとしない、いかにも普通の男だ。
			PRINTL
			IF TCVAR:ARG:ゆきずりセックス_体位 >= 1
				PRINTFORML 突然舞い降りた、極上の女を抱けるチャンス。望外であろう喜びに、男の緊張がこちらにも見て取れる。
				PRINTL
				PRINTFORML 最初こそおそるおそるといった感じだった彼が、次第にわがままに、欲望に素直になっていくさまに、
				PRINTFORMW %CALLNAME:ARG%は恍惚の表情を浮かべながら男のペニスを受け入れている。
			ELSE
				PRINTFORML 突然舞い降りた、極上の女の奉仕を受けられる幸運。望外であろう喜びに、男の緊張がこちらにも見て取れる。
				PRINTL
				PRINTFORML 最初こそおそるおそるといった感じだった彼が、次第にわがままに、欲望に素直になっていくさまに、
				PRINTFORMW %CALLNAME:ARG%は恍惚の表情を浮かべながら男のペニスに尽くしている。
			ENDIF
		ENDIF
	ENDSELECT
	TCVAR:ARG:ゆきずりセックス_相手描写 = 1
;2回目以降
ELSE 
	PRINTFORM %CALLNAME:ARG%は
;相手モブ描写	
	SELECTCASE TCVAR:ARG:ゆきずりセックス_相手モブ
		CASE 0
			PRINTFORM	%TEXTR("冴えない/陰気そうな")%青年
		CASE 1
			PRINTFORM	%TEXTR("でっぷりと腹の出た/恰幅のいい")%中年
		CASE 2 TO 3
			IF TALENT:ARG:年齢層 == 10 || (BASE:ARG:年齢 <= 13 && BASE:ARG:年齢 != 0)
				PRINTFORM 同じ年頃の少年
			ELSE
				PRINTFORM %TEXTR("小さな/年端もいかない")%男の子
			ENDIF
		CASE 4
			PRINTFORM 体格のいい男
		CASE 5
			PRINTFORM テクニシャンな老人
;		CASE 6
			
		CASEELSE
			PRINTFORM %TEXTR("ぱっとしない/普通な")%男
		ENDSELECT
;体位描写
	SELECTCASE TCVAR:ARG:ゆきずりセックス_体位
		CASE 0 ;奉仕
			PRINTFORMW に%CSTR:ARG:ゆきずりセックス_プレイ内容%で奉仕している。
		CASE 1 ;V性交
			PRINTFORMW と%CSTR:ARG:ゆきずりセックス_プレイ内容%で交わっている。	
		CASE 2 ;A性交
			PRINTFORMW と%CSTR:ARG:ゆきずりセックス_プレイ内容%で交わっている。
	ENDSELECT
ENDIF

;お相手の絶頂とかち合ったかで分岐
IF TCVAR:ARG:ゆきずりセックス_絶頂値 > 0
	;通常時
	IF !TCVAR:ARG:覗きバレ
		;まだバレてない
		
		;覗きバレ判定を行う
		IF TCVAR:ARG:使い魔覗き中
			;使い魔覗き中は相手の魔法知識Lvによってバレる可能性がある
			IF RAND:10 < 知識素質:ARG:魔法知識*2
				;覗きバレフラグを立てる
				TCVAR:ARG:覗きバレ = 1
				
			ENDIF
		ENDIF
		;どちらにせよ一定の確率でバレちゃう(大体10%ぐらい)
		SIF RAND:10 < 1
			TCVAR:ARG:覗きバレ = 1
		
		IF TCVAR:ARG:覗きバレ
			PRINTFORML 淫靡な光景を堪能していると、%CALLNAME:ARG%がちらりとこちらに目を向けた。
			PRINTFORML 目線は間違いなくこちらを捕らえている。これは偶然ではない、バレている……!!
			SIF TCVAR:ARG:使い魔覗き中 && 知識素質:ARG:魔法知識 >= 1
				PRINTFORML 魔法知識に長けた%CALLNAME:ARG%に対して使い魔を差し向けたのは悪手だったかもしれない……
			PRINTFORMW 
			PRINTL
			SELECTCASE RAND:3
				CASE 0
					PRINTFORM 視線に気付いた%CALLNAME:ARG%はしかし、こちらに不敵な笑みを向けると
				CASE 1
					PRINTFORM 視線に気付いた%CALLNAME:ARG%はこちらにウインクすると、
				CASE 2
					PRINTFORM 視線に気付いた%CALLNAME:ARG%は悪戯っぽくシーッと口に指をあてると、
			ENDSELECT
			PRINTFORML 先ほどよりも激しく行為に勤しみだした。
			PRINTL
			PRINTFORML それはこちらへの当てつけなのか、それとも「見られている」という事に興奮しているのかは分からないが……
			PRINTFORMW どちらにせよ、より淫靡な姿を見せる%CALLNAME:ARG%の姿にこちらも目を離せずにいた……
		ELSE
			;ばれてない
			PRINTFORMW 目の前の雄と雌は覗かれている事に気づかず、互いに性的な快楽を貪っている……
		ENDIF
	ELSE
		;すでにバレている
		PRINTFORML %CALLNAME:ARG%はちらりとこちらに視線を向け、%CALLNAME:PLAYER%がまだ覗き見ているのを確認すると
		PRINTFORML わざと聞こえるように喘ぎ声を上げたり、激しさを増したりと、こちらの情欲を煽ってくる。
		PRINTFORMW あられもない姿を晒してこちらを愉しませてくれる%TEXTR("健気な姿に/サービス精神に")%感謝して、%CALLNAME:PLAYER%は%CALLNAME:ARG%の%TEXTR("情事/秘め事")%をゆっくり堪能した……
	ENDIF
	
ELSE
	;お相手側の絶頂とかち合っちゃった
	
	PRINTFORM 丁度男が絶頂を迎えたタイミングだったらしく、
	SELECTCASE TCVAR:ARG:ゆきずりセックス_体位
		CASE 1 ;Ｖ性交
			PRINTFORML %CALLNAME:ARG%は快楽に身を震わせながら放たれた白濁を膣内で受けとめていた。
			PRINTL
			PRINTFORML リゾートでのバカンスのさなか、%CALLNAME:ARG%のような極上の雌
			IF TCVAR:ARG:ゆきずりセックス_誘い
				PRINTFORML をひっかけて、
			ELSE
				PRINTFORML に誘われ、
			ENDIF
			PRINTFORMW そのカラダを存分に楽しみ抜いたすえの、最奥に突き入れ腰を押しつけながらの無責任膣内射精。
			PRINTL
			PRINTFORML %TEXTR("わざとらしく「中はダメ」「今日は危ないから」などと煽りながらの弱々しい抵抗を、力でねじ伏せながら/欲望の全てを肯定されるがままに")%欲望を吐き出す、その快楽はまさに至上なのだろう。
			PRINTFORML 天を仰ぎ%TEXTR("背/腰")%を震わせながらの長い長い射精を終えた男がペニスを抜くと、収まり切れなかった精液が溢れ、ボトボトと床を汚した。
			IF TCVAR:ARG:覗きバレ
				PRINTL
				PRINTFORML %CALLNAME:ARG%は女陰を指で広げ、しっかり種付けされたことを男に…あるいはその奥で覗いている%CALLNAME:PLAYER%に見せつけた。
			ENDIF
			PRINTW
		CASE 2 ;Ａ性交
			PRINTFORML %CALLNAME:ARG%は快楽に身を震わせながら放たれた白濁を尻穴で受けとめていた。
			PRINTFORML 長い射精を終えた男がペニスを抜くと、収まり切れなかった精液が溢れ、ボトボトと床を汚す。
			IF TCVAR:ARG:覗きバレ
				PRINTFORML %CALLNAME:ARG%は尻を両手で広げ、精液が溢れている尻穴を男に…あるいはその奥で覗いている%CALLNAME:PLAYER%に見せつけた。
			ENDIF
		CASEELSE ;奉仕
			PRINTFORML 男の精液が奉仕している%CALLNAME:ARG%に降りかかった。
			IF TCVAR:ARG:覗きバレ
				PRINTFORML %CALLNAME:ARG%は自身に向けて大量に出された精液を男に…あるいはその奥で覗いている%CALLNAME:PLAYER%に見せつけた。
			ENDIF
	ENDSELECT
	PRINTFORML 
	PRINTFORML ………………………
	PRINTFORMW
	 
	IF TCVAR:ARG:ゆきずりセックス_残時間
		;延長戦
		PRINTFORML 行為後の淫靡な%CALLNAME:ARG%の姿に当てられた男のペニスは再びムクムクと硬さを帯び、語ることなく%CALLNAME:ARG%に処理を催促する。
		PRINTFORMW 満足に至っていない%CALLNAME:ARG%も突き出されたペニスをうっとりとした表情を見せ、ゆきずりの性行為を再開しはじめた……
		
	ELSE
		;終わり
		PRINTFORML 互いに満足した二人はしばらく余韻を浸ったのち、そそくさと服の乱れを直し始めた。
		PRINTFORMW このままでは鉢合わせてしまう……%CALLNAME:PLAYER%は急いでその場を離れた。
	ENDIF
ENDIF

;パラメータ更新
CALL ゆきずりセックス_パラメータ変動処理(ARG, 15)


;==================================================================================================
@ゆきずりセックス途中終了(ARG)
;-------------------------------------------------
;ARG番のキャラがゆきずりセックスを何らかの理由で途中終了した際に動かす関数
;フラグ周りを初期化する
;--------------------------------------------------------------------------------------------------
TCVAR:ARG:ゆきずりセックス_残時間 = 0
TCVAR:ARG:ゆきずりセックス_絶頂値 = 100
RETURN 0


;==================================================================================================
@IS_ゆきずりセックス中(ARG)
#FUNCTION
;-------------------------------------------------
;ARG番のキャラがゆきずりセックス中であるかを判定する関数
;残時間が0以下で、相手が絶頂したタイミングで終了(0)を返す。
;--------------------------------------------------------------------------------------------------
#DIM 行為中判定 = 1
;--------------------------------------------------------------------------------------------------
IF !TCVAR:ARG:ゆきずりセックス_残時間  && !TCVAR:ARG:ゆきずりセックス_絶頂値
	RETURNF 0
ELSE
	RETURNF 1
ENDIF


;==================================================================================================
@ゆきずりセックス内容決定(ARG)
;-------------------------------------------------
;各感覚と技巧を基に行為の内容を決定する。(Ｖ性交、Ａ性交、性奉仕)
;基本的にどれも最低でも1の重みを持ち、オプションの設定次第では初体験を捧げる可能性を持つ
;--------------------------------------------------------------------------------------------------
#DIMS プレイ内容
#DIM Ｖ性交重み
#DIM Ａ性交重み
#DIM 奉仕重み
#DIM 重み合計
;--------------------------------------------------------------------------------------------------

;プレイ内容の重み決定
;Ｖ性交 … 「Ｖなし」ではなく、「純潔設定あり」で「処女」以外の場合のみ実行
SIF TALENT:ARG:Ｖ感度 > -2 && !(OPTION変数:夜這い処女・童貞 && TALENT:ARG:処女)
	;Ｖ感覚に影響する
	Ｖ性交重み += MAX(1, ABL:ARG:Ｖ感覚)

;Ａ性交 … 「Ａなし」ではなく、「純潔設定あり」で「Ａ処女」以外の場合のみ実行
SIF TALENT:ARG:Ａ感度 > -2 && !(OPTION変数:夜這い処女・童貞 && TALENT:ARG:Ａ処女)
	;Ａ感覚に影響する
	Ａ性交重み += MAX(1, ABL:ARG:Ａ感覚)

;奉仕 … NPCから誘われた時に重みを得る。
SIF TCVAR:ARG:ゆきずりセックス_誘い
	;奉仕精神と素質[献身的]に影響する。
	奉仕重み += MAX(1, ABL:ARG:奉仕精神) + (TALENT:ARG:献身的*2)

;重み合計を算出
重み合計 = Ｖ性交重み+Ａ性交重み+奉仕重み

;プレイ内容の決定
IF 重み合計
	;重み合計を基に乱数でプレイ内容を決定
	SELECTCASE RAND:重み合計
		;=========================================================
		; ●奉仕性交
		;=========================================================
		;基本的にはキャラの性欲は満たされず絶頂しない(NPCは満足する)
		CASE IS < 奉仕重み
			;挿入以外の性交…フェラチオ、手コキ
			
			;どのプレイでも奉仕快楽経験を積む
			EXP:ARG:奉仕快楽経験 ++
			
			SELECTCASE RAND:2
				CASE 0
					プレイ内容 = フェラチオ
					EXP:ARG:口淫経験 ++
					
				CASE 1
					プレイ内容 = 手コキ
					EXP:ARG:手淫経験 ++
			ENDSELECT
			
			
		;=========================================================
		; ●Ｖ性交
		;=========================================================
		CASE 奉仕重み TO 奉仕重み+Ｖ性交重み-1
			;Ｖ性交
			SELECTCASE RAND:12
				CASE 0
					プレイ内容 = 正常位
				CASE 1
					プレイ内容 = 後背位
				CASE 2
					プレイ内容 = 寝バック
				CASE 3
					プレイ内容 = 対面座位
				CASE 4
					プレイ内容 = 背面座位
				CASE 5
					プレイ内容 = 騎乗位
				CASE 6
					プレイ内容 = 側位
				CASE 7
					プレイ内容 = 屈曲位
				CASE 8
					プレイ内容 = 駅弁
				CASE 9
					プレイ内容 = 背面駅弁
				CASE 10
					プレイ内容 = 対面立位
				CASE 11 
					プレイ内容 = 立ちバック
			ENDSELECT
			
			;部位を設定
			TCVAR:ARG:ゆきずりセックス_体位 = 1
			
			;初めて判定
			IF EXP:ARG:Ｖ性交経験 == 0
				CALL 履歴データベース登録(CFLAG:ARG:人物番号, @"<font color='#%カラーパレット_HTML("薄ピンク")%'>出会ったばかりの相手に自ら処女を捧げてしまった</font><img src='えっちハート'>","うふふ")
			ENDIF
			TALENT:ARG:処女 = 0
			
			;経験回数
			EXP:ARG:Ｖ経験 ++
			EXP:ARG:Ｖ性交経験 ++
			
			
		;=========================================================
		; ●Ａ性交
		;=========================================================
		CASE 奉仕重み+Ｖ性交重み TO 奉仕重み+Ｖ性交重み+Ａ性交重み-1
			;Ａ性交
			SELECTCASE RAND:12
				CASE 0
					プレイ内容 = Ａ正常位
				CASE 1
					プレイ内容 = Ａ後背位
				CASE 2
					プレイ内容 = Ａ寝バック
				CASE 3
					プレイ内容 = Ａ対面座位
				CASE 4
					プレイ内容 = Ａ背面座位
				CASE 5
					プレイ内容 = Ａ騎乗位
				CASE 6
					プレイ内容 = Ａ側位
				CASE 7
					プレイ内容 = Ａ屈曲位
				CASE 8
					プレイ内容 = Ａ駅弁
				CASE 9
					プレイ内容 = Ａ背面駅弁
				CASE 10
					プレイ内容 = Ａ対面立位
				CASE 11 
					プレイ内容 = Ａ立ちバック
			ENDSELECT
			
			;体位を設定
			TCVAR:ARG:ゆきずりセックス_体位 = 2
			
			;初めて判定
			IF EXP:ARG:Ａ性交経験 == 0
				CALL 履歴データベース登録(CFLAG:ARG:人物番号, @"<font color='#%カラーパレット_HTML("薄ピンク")%'>出会ったばかりの相手に自ら後ろの初めてを捧げてしまった</font><img src='えっちハート'>","うふふ")
			ENDIF
			TALENT:ARG:Ａ処女 = 0
			
			;経験回数
			EXP:ARG:Ａ経験 ++
			EXP:ARG:Ａ性交経験 ++
			
	ENDSELECT
ELSE
	;全ての重みが0の時は「手コキ」にする。
	プレイ内容 = 手コキ
	EXP:ARG:手淫経験 ++
	
ENDIF

;プレイ内容を保管
CSTR:ARG:ゆきずりセックス_プレイ内容 = %プレイ内容%


