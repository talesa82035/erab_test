


@外出先_ルーチン設定_200(対象キャラ)
#DIM 対象キャラ

移動ルーチン:対象キャラ:ルーチンID = 
移動ルーチン:対象キャラ:PMルーチンID = 

IF NO:対象キャラ == 997
	;タピィラ
	移動ルーチン:対象キャラ:ルーチンID = 外出先_200_タピィラ
ELSEIF NO:対象キャラ == 410
	;シトリ
	移動ルーチン:対象キャラ:ルーチンID = 外出先_200_シトリ
ELSE
	;その他
	移動ルーチン:対象キャラ:ルーチンID = 外出先_200_汎用
ENDIF

;スケジュールの設定
CALLFORM ROUTINE_SCHEDULE_%移動ルーチン:対象キャラ:ルーチンID%(対象キャラ)



;------------------------------------------------------------------------------
;タピィラ用ルーチンセット
;家にずっといる
;------------------------------------------------------------------------------
@MOVE_ROUTINE_外出先_200_タピィラ(キャラ番号, ARGS)
#DIM キャラ番号
#DIM 時間計算

SELECTCASE ARGS
	CASE "参加判定"
		RETURN 1

	CASE "起床時刻"
		時間計算 = 450 - (TALENT:キャラ番号:早起き * 30)
		RETURN 時間計算

	CASE "就寝時刻"
		時間計算 = 1320 - (TALENT:キャラ番号:早寝 * 60)
		RETURN 時間計算

	CASE "就寝場所"
		RETURN 1

	CASE "初期位置"
		CFLAG:キャラ番号:現在位置 = 1
		CFLAG:キャラ番号:現在マップ種別 = 200
ENDSELECT

@ROUTINE_SCHEDULE_外出先_200_タピィラ(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

CALL RESET_SCHEDULE(キャラ番号)
スケジュール番号 = 0

;家にずっといる
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 0, "外出先_200_タピィラ")
スケジュール番号++


;------------------------------------------------------------------------------
;タピィラ用スケジュール
;------------------------------------------------------------------------------
@SCHEDULE_外出先_200_タピィラ(キャラ番号, 小分類, 処理内容)
#DIM キャラ番号
#DIMS 小分類
#DIMS 処理内容

SELECTCASE 処理内容
	CASE "開始処理"
		スケジュール状態:キャラ番号:目的地 = 1
		スケジュール状態:キャラ番号:目的マップ = 200
		RETURN 1
	CASE "経過処理"
	CASE "終了処理"
		RETURN 1
ENDSELECT


;------------------------------------------------------------------------------
;シトリ用ルーチンセット
;その辺をうろうろ
;------------------------------------------------------------------------------
@MOVE_ROUTINE_外出先_200_シトリ(キャラ番号, ARGS)
#DIM キャラ番号
#DIM 時間計算

SELECTCASE ARGS
	CASE "参加判定"
		RETURN 1

	CASE "起床時刻"
		時間計算 = 510 - (TALENT:キャラ番号:早起き * 30)
		RETURN 時間計算

	CASE "就寝時刻"
		時間計算 = 1260 - (TALENT:キャラ番号:早寝 * 60)
		RETURN 時間計算

	CASE "就寝場所"
		RETURN 1

	CASE "初期位置"
		CFLAG:キャラ番号:現在位置 = 2
		CFLAG:キャラ番号:現在マップ種別 = 200
ENDSELECT

@ROUTINE_SCHEDULE_外出先_200_シトリ(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

CALL RESET_SCHEDULE(キャラ番号)
スケジュール番号 = 0

;うろうろ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 0, "外出先_200_汎用")
スケジュール番号++


;------------------------------------------------------------------------------
;汎用スケジュール
;------------------------------------------------------------------------------
@SCHEDULE_外出先_200_汎用(キャラ番号, 小分類, 処理内容)
#DIM キャラ番号
#DIMS 小分類
#DIMS 処理内容

SELECTCASE 処理内容
	CASE "開始処理"
		TCVAR:キャラ番号:移動ルーチンインターバル時間 = 0
		RETURN 1
	CASE "経過処理"
		SIF TCVAR:キャラ番号:移動ルーチンインターバル時間 > 0
			RETURN

		スケジュール状態:キャラ番号:目的マップ = 200
		スケジュール状態:キャラ番号:目的地 = RAND:4 + 1
		TCVAR:キャラ番号:移動ルーチンインターバル時間 = RAND(60, 120)
	CASE "終了処理"
		TCVAR:キャラ番号:移動ルーチンインターバル時間 = 0
		RETURN 1
ENDSELECT

;------------------------------------------------------------------------------
;汎用ルーチンセット
;その辺をうろうろ
;------------------------------------------------------------------------------
@MOVE_ROUTINE_外出先_200_汎用(キャラ番号, ARGS)
#DIM キャラ番号
#DIM 時間計算

SELECTCASE ARGS
	CASE "参加判定"
		RETURN 1

	CASE "起床時刻"
		時間計算 = 510 - (TALENT:キャラ番号:早起き * 30)
		RETURN 時間計算

	CASE "就寝時刻"
		時間計算 = 1260 - (TALENT:キャラ番号:早寝 * 60)
		RETURN 時間計算

	CASE "就寝場所"
		RETURN 1

	CASE "初期位置"
		CFLAG:キャラ番号:現在位置 = 1
		CFLAG:キャラ番号:現在マップ種別 = 200
ENDSELECT

@ROUTINE_SCHEDULE_外出先_200_汎用(キャラ番号)
#DIM キャラ番号
#DIM スケジュール番号

CALL RESET_SCHEDULE(キャラ番号)
スケジュール番号 = 0

;うろうろ
CALL SET_SCHEDULE(キャラ番号, スケジュール番号, 0, "外出先_200_汎用")
スケジュール番号++
