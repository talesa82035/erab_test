;--------------------------------------------------
;登録データ
;--------------------------------------------------
@複数人一枚絵_登録データ_アストルフォ_ポルノ(動作モード, 指定キャラ)
#DIM 配列番号
#DIM 差分数
#DIM ランダム決定
#DIM 服確認
#DIMS 動作モード
#DIMS 射精指定
#DIMS 服指定
#DIMS 対象キャラ名
#DIMS コマンド指定
#DIM REF 指定キャラ

SELECTCASE 動作モード
	CASE "初期登録"
		指定キャラ:0 = キャラ検索("[“黒”のライダー]アストルフォ")
		指定キャラ:1 = キャラ検索("[無想]ポルノ")
	CASE "画像指定"
		対象キャラ名 = ポルノ

		コマンド指定 = %MODE_直近取得_順不同(指定キャラ:0, 指定キャラ:1)%
		IF コマンド指定 == ""
			コマンド指定 = 待機
		ENDIF

		射精指定 = 
		IF TCVAR:(指定キャラ:1):前ターン被射精場所 > 0
			射精指定 = 射精
		ENDIF

        服指定 = %CSTR:(指定キャラ:1):着せ替え服%
		服確認 = ENUMFILES(@"resources/%CSTR:(指定キャラ:0):画像フォルダ%/%対象キャラ名%/%服指定%", @"*")
        IF  服確認 < 0 || 服指定 == ""
            服指定 = デフォルト
        ENDIF

		差分数 = ENUMFILES(@"resources/%CSTR:(指定キャラ:0):画像フォルダ%/%対象キャラ名%/%服指定%/%射精指定%", @"%コマンド指定%*.*")
		IF 差分数 > 0
			ランダム決定 = RAND:差分数
			RESULTS = %REPLACE(RESULTS:ランダム決定, ESCAPE("resources\\"), "")%
		ELSEIF 差分数 == 0
			RESULTS = %CSTR:(指定キャラ:0):画像フォルダ%/%対象キャラ名%/%服指定%/%射精指定%/待機
		ELSE
			RESULTS = %CSTR:(指定キャラ:0):画像フォルダ%/%対象キャラ名%/%服指定%/%射精指定%/%コマンド指定%
		ENDIF
ENDSELECT
